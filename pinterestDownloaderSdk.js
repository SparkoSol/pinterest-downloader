function initialize(){initializeCssStyleSheet();let k=document.getElementById("downloader"),d=document.createElement("div");d.className="wrapper",k.appendChild(d);let g=document.createElement("h1");g.innerText="Pinterest Downloader",g.className="title",d.appendChild(g);let h=document.createElement("div");h.id="div1";let i=document.createElement("form"),j=document.createElement("div"),e=document.createElement("label");e.className="label",e.for="url",e.innerText="Video URL";let b=document.createElement("input");b.id="url",b.type="text",b.placeholder="Please enter valid video URL i.e: https://pin.it/5sfd2T64",b.className="form-control p-3",j.append(e),j.append(b);let f=document.createElement("div");f.className="btn-group";let c=document.createElement("button");c.className="cancel-btn btn",c.type="button",c.innerText="Reset";let a=document.createElement("button");a.className="submit-btn btn",a.type="button",a.innerHTML="<span>Generate</span>",a.style.display="flex",a.style.marginRight="10px",f.appendChild(c),f.appendChild(a),i.append(j),i.append(f),h.appendChild(i),d.appendChild(h),c.addEventListener("click",function(){if(b.value&&""!==b.value){let c=document.getElementById("file-details");c&&c.remove(),b.value=""}a.disabled=!1,a.classList.remove("disable"),b.classList.contains("invalid")&&(b.classList.remove("invalid"),document.getElementById("error").remove())}),a.addEventListener("click",async function(){if(""===b.value&&!b.value&&!b.classList.contains("invalid")){b.classList.add("invalid");let c=document.createElement("span");c.innerText="Valid Video Url is required !",c.id="error",c.style.color="red",c.style.marginBottom="10px",j.appendChild(c),a.disabled=!0,a.classList.add("disable");return}let d=document.createElement("span");d.id="loader",d.className="loader",d.style.marginLeft="10px",a.appendChild(d),a.disabled=!0,a.classList.add("disable"),await fetch("http://10.20.20.101:3000/dataShake/testing/url",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({url:b.value})}).then(a=>a.json()).then(e=>{document.getElementById("file-details")&&document.getElementById("file-details").remove();let d=document.createElement("div");d.className="file-preview",d.id="file-details";let g=document.createElement("div");g.className="mr-4";let c=document.createElement("img");c.src=e.thumbnail,c.className="img-thumbnail",c.width=e.width,c.height=e.height,c.alt="thumbnail",g.appendChild(c),d.appendChild(g);let f=document.createElement("div");f.className="file-details";let i=document.createElement("p");i.className="label",i.innerText=e.url.replace(/^.*[\\\/]/,""),f.appendChild(i);let j=document.createElement("div");j.className="download-preview";let b=document.createElement("button");b.id="download_btn",b.type="button",b.className="download-btn btn",b.innerHTML='<span id="download-btn-id">Download Now</span>',b.style.display="flex",b.style.marginRight="10px",j.appendChild(b),f.appendChild(j),d.appendChild(f),h.appendChild(d),a.disabled=!0,b.addEventListener("click",async c=>{c.preventDefault(),document.getElementById("download-btn-id").innerText="Downloading...",b.disabled=!0;let a=document.createElement("span");a.id="download_loader",a.className="loader",a.style.marginLeft="10px",b.appendChild(a),b.disabled=!0,b.classList.add("disable");let d="http://10.20.20.101:3000/dataShake/testing/getVideo?url="+e.url;await fetch(d,{redirect:"follow",method:"GET"}).then(a=>a.blob()).then(e=>{let c=URL.createObjectURL(e),a=document.createElement("a");a.href=c,a.download=d.replace(/^.*[\\\/]/,""),document.body.appendChild(a),a.click(),b.innerText="Download Now",URL.revokeObjectURL(c),a.remove()}).catch(a=>{console.log(a),b.innerText="Download Now"}).finally(()=>{b.innerHTML='<span id="download-btn-id">Download Now</span>',a.remove(),b.disabled=!1,b.classList.remove("disable")})})}).catch(a=>{console.error("Error:",a)}).finally(()=>{d.remove(),a.disabled=!1,a.classList.remove("disable")})}),getUrlParams()}function getUrlParams(){let b=document.getElementById("url"),a=new URLSearchParams(window.location.search);a.has("videoUrl")&&(b.value=a.get("videoUrl"))}function initializeCssStyleSheet(){let b=document.getElementsByTagName("head")[0],a=document.createElement("style");a.innerText=".title {\n    color: #CB2027;\n    font-weight: 700!important;\n    margin-bottom: 0.5rem!important;\n    margin-top: 0.5rem!important;\n    font-size: 2.5rem;\n}\n\n.wrapper {\n    width: 100%;\n    padding-right: 15px;\n    padding-left: 15px;\n    margin-right: auto;\n    margin-left: auto;\n    margin-top: 1.5rem!important;\n    margin-bottom: 1.5rem!important;\n}\n\n.label {\n    padding: 0.5rem!important;\n    font-weight: 700!important;\n    text-align: left!important;\n    display: block!important;\n    margin-bottom: 0.5rem;\n}\n\n.form-control {\n    display: block;\n    width: 100%;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    color: #495057;\n    background-color: #fff;\n    background-clip: padding-box;\n    border: 1px solid #ced4da;\n    border-radius: 0.25rem;\n    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n    margin-bottom: 10px;\n}\n\n.btn-group {\n    display: flex!important;\n    flex-direction: row!important;\n    justify-content: flex-start!important;\n}\n\n.cancel-btn {\n    color: #fff;\n    background-color: #dc3545;\n    border-color: #dc3545;\n    margin-right: 10px;\n}\n\n.submit-btn {\n    color: #fff;\n    background-color: #007bff;\n    border-color: #007bff;\n}\n\n.btn {\n    cursor: pointer;\n    display: inline-block;\n    font-weight: 400;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    border: 1px solid transparent;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    border-radius: 0.25rem;\n    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n}\n\n.file-preview {\n    margin-top: 3rem!important;\n    flex-direction: row!important;\n    display: flex!important;\n}\n\n.mr-4 {\n    margin-right: 1.5rem!important;\n}\n\n.img-thumbnail {\n    padding: 0.25rem;\n    background-color: #fff;\n    border: 1px solid #dee2e6;\n    border-radius: 0.25rem;\n    max-width: 100%;\n    height: auto;\n}\n\n.download-preview {\n    padding: 0.5rem!important;\n    justify-content: space-between!important;\n    display: flex!important;\n}\n\n.download-btn {\n    cursor: pointer;\n    color: #fff;\n    background-color: #17a2b8;\n}\n\n.file-details {\n    width: 100%; border:1px solid #dee2e6; padding: 0 5px\n}\n\n.invalid {\n    border: 2px dashed red;\n}\n\n.disable {\n    opacity: 0.45;\n    cursor: not-allowed;\n}\n\n.loader {\n    border: 4px solid #f3f3f3;\n    border-radius: 50%;\n    border-top: 4px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin 2s linear infinite; /* Safari */\n    animation: spin 2s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}",b.appendChild(a)}initialize()